(function(){"use strict";var e={4479:function(e,t,a){var n=a(9242),l=a(3396);function o(e,t,a,n,o,r){const i=(0,l.up)("router-view");return(0,l.wg)(),(0,l.j4)(i)}var r={name:"App",components:{}},i=a(89);const s=(0,i.Z)(r,[["render",o]]);var d=s,u=a(2026),c=a(1957),f=a(2483),p=a(7139);const m={class:"container"},h=(0,l._)("h1",null,"Создание графа знаний",-1),g=(0,l._)("h3",null,"Заполните таблицу",-1),v={class:"input-group"},y=(0,l._)("span",{class:"input-group-text"},"Полное имя факта, краткое обозначение и значения фактов",-1),w=(0,l._)("p",null,null,-1),b=(0,l._)("h3",null,"Введеные факты",-1),_=(0,l._)("div",null,[(0,l._)("p")],-1),k=(0,l._)("option",{value:"",disabled:"",selected:""},"Факт 1",-1),x=(0,l._)("option",{value:"",disabled:"",selected:""},"Тип отношения",-1),O=(0,l._)("option",{value:"И"},"И",-1),S=(0,l._)("option",{value:"ИЛИ"},"Или",-1),U=[x,O,S],j=(0,l._)("option",{value:"",disabled:"",selected:""},"Факт 2",-1),T={class:"form-floating"},V=(0,l._)("label",{for:"floatingTextarea2"},"Значение факта 1",-1),$={class:"form-floating"},A=(0,l._)("label",{for:"floatingTextarea2"},"Значение факта 2",-1),C=(0,l._)("h3",null,"Итоговый факт",-1),D=(0,l._)("option",{value:"",disabled:"",selected:""},"Факт 3",-1),N={class:"form-floating"},L=(0,l._)("label",{for:"floatingTextarea2"},"Значение факта 3",-1),I=(0,l._)("h3",null,"Данные",-1),J=(0,l._)("p",null,null,-1);function F(e,t,a,o,r,i){const s=(0,l.up)("b-alert"),d=(0,l.up)("b-button"),u=(0,l.up)("b-form-textarea"),c=(0,l.up)("v-edge-label"),f=(0,l.up)("v-network-graph");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(n.W3,null,{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(s,{show:"",variant:"danger"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,p.zw)(r.warning_text),1)])),_:1},512),[[n.F8,r.show]])])),_:1}),(0,l._)("div",m,[h,(0,l._)("div",null,[g,(0,l._)("div",v,[y,(0,l.wy)((0,l._)("input",{type:"text","aria-label":"First name",class:"form-control","data-toggle":"tooltip","data-placement":"top",title:"Введите полное имя факта","onUpdate:modelValue":t[0]||(t[0]=e=>r.infotemp.fakt=e)},null,512),[[n.nr,r.infotemp.fakt]]),(0,l.wy)((0,l._)("input",{type:"text","aria-label":"Last name",class:"form-control","data-toggle":"tooltip","data-placement":"top",title:"Введите краткое обозначение","onUpdate:modelValue":t[1]||(t[1]=e=>r.infotemp.descr=e)},null,512),[[n.nr,r.infotemp.descr]]),(0,l.wy)((0,l._)("input",{type:"text","aria-label":"Last name",class:"form-control","data-toggle":"tooltip","data-placement":"top",title:"Введите значения фактов через ';'","onUpdate:modelValue":t[2]||(t[2]=e=>r.infotemp.infofakt=e)},null,512),[[n.nr,r.infotemp.infofakt]])]),w,""!==r.infotemp.fakt&&""!==r.infotemp.faktinfo?((0,l.wg)(),(0,l.j4)(d,{key:0,variant:"btn btn-success",onClick:i.save},{default:(0,l.w5)((()=>[(0,l.Uk)("Сохранить")])),_:1},8,["onClick"])):((0,l.wg)(),(0,l.j4)(d,{key:1,variant:"btn btn-success",onClick:i.save,disabled:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Сохранить")])),_:1},8,["onClick"])),b,(0,l.Wm)(u,{id:"textarea1",modelValue:e.textArray1,"onUpdate:modelValue":t[3]||(t[3]=t=>e.textArray1=t),placeholder:"",rows:"3","max-rows":"6",readonly:""},null,8,["modelValue"])]),_,(0,l._)("div",null,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.temp.f1=e),class:"form-select","aria-label":"Default select example"},[k,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.fact_array,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e},(0,p.zw)(e.fakt),1)))),128))],512),[[n.bM,r.temp.f1]])]),(0,l._)("div",null,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>r.temp.r=e),class:"form-select","aria-label":"Default select example"},U,512),[[n.bM,r.temp.r]])]),(0,l._)("div",null,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>r.temp.f2=e),class:"form-select","aria-label":"Default select example"},[j,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.fact_array,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e},(0,p.zw)(e.fakt),1)))),128))],512),[[n.bM,r.temp.f2]])]),(0,l._)("div",T,[(0,l.wy)((0,l._)("textarea",{class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>r.temp.val1=e),placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"100px"}},null,512),[[n.nr,r.temp.val1]]),V]),(0,l._)("div",$,[(0,l.wy)((0,l._)("textarea",{class:"form-control","onUpdate:modelValue":t[8]||(t[8]=e=>r.temp.val2=e),placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"100px"}},null,512),[[n.nr,r.temp.val2]]),A]),(0,l._)("div",null,[C,(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>r.temp.f2=e),class:"form-select","aria-label":"Default select example"},[D,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.fact_array,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e},(0,p.zw)(e.fakt),1)))),128))],512),[[n.bM,r.temp.f2]]),(0,l._)("div",N,[(0,l.wy)((0,l._)("textarea",{class:"form-control","onUpdate:modelValue":t[10]||(t[10]=e=>r.temp.val3=e),placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"100px"}},null,512),[[n.nr,r.temp.val3]]),L])]),I,(0,l.Wm)(u,{id:"textarea",modelValue:r.textArray,"onUpdate:modelValue":t[11]||(t[11]=e=>r.textArray=e),placeholder:"",rows:"3","max-rows":"6",readonly:""},null,8,["modelValue"]),J,""!==r.temp.f1&&""!==r.temp.r&&""!==r.temp.f2&&""!==r.temp.val1&&""!==r.temp.val2&&""!==r.temp.val3?((0,l.wg)(),(0,l.j4)(d,{key:0,onClick:i.addText,variant:"btn btn-primary"},{default:(0,l.w5)((()=>[(0,l.Uk)("Добавить отношение")])),_:1},8,["onClick"])):((0,l.wg)(),(0,l.j4)(d,{key:1,onClick:i.addText,variant:"btn btn-primary",disabled:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Добавить отношение")])),_:1},8,["onClick"])),""!==r.textArray?((0,l.wg)(),(0,l.j4)(d,{key:2,variant:"btn btn-warning",onClick:i.sendData},{default:(0,l.w5)((()=>[(0,l.Uk)("Создать граф")])),_:1},8,["onClick"])):((0,l.wg)(),(0,l.j4)(d,{key:3,variant:"btn btn-warning",disabled:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Создать граф")])),_:1})),""!==r.textArray?((0,l.wg)(),(0,l.j4)(d,{key:4,variant:"btn btn-danger",onClick:i.clearAll},{default:(0,l.w5)((()=>[(0,l.Uk)("Очистить")])),_:1},8,["onClick"])):((0,l.wg)(),(0,l.j4)(d,{key:5,variant:"btn btn-danger",disabled:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Очистить")])),_:1})),(0,l.Wm)(d,{variant:"btn btn-info",onClick:i.savefile},{default:(0,l.w5)((()=>[(0,l.Uk)("Сохранить отчет")])),_:1},8,["onClick"])]),(0,l.wy)((0,l._)("div",null,[(0,l.Wm)(f,{class:"graph",nodes:r.nodes,edges:r.edges,layouts:r.layouts},{"edge-label":(0,l.w5)((({edge:e,...t})=>[(0,l.Wm)(c,(0,l.dG)({text:e.label,align:"center","vertical-align":"above"},t),null,16,["text"])])),_:1},8,["nodes","edges","layouts"])],512),[[n.F8,r.ready]])],64)}a(7658);var M=a(6265),W=a.n(M);const P=()=>"/";function R(){const e=W().create({baseURL:P()});return e}var Z=R(),z={name:"MainView",title:"Observer",components:{},data(){return{fact_array:[],infotemp:{fakt:"",descr:"",infofakt:""},temp:{f1:"",r:"",f2:"",f3:"",val1:"",val2:"",val3:""},array:[],textArray:"",show:!1,warning_text:"",nodes:{node1:{name:"Node 1"},node2:{name:"Node 2"},node3:{name:"Node 3"},node4:{name:"Node 4"}},edges:{edge1:{source:"node1",target:"node2"},edge2:{source:"node2",target:"node3"},edge3:{source:"node3",target:"node4"}},layouts:{nodes:{node1:{x:0,y:0},node2:{x:50,y:50},node3:{x:100,y:0},node4:{x:150,y:50}}},kout:0,ready:!1,coutt:0}},methods:{closeAlert(){this.show=!1,this.warning_text=""},clearFields(){this.temp.f1="",this.temp.r="",this.temp.f2="",this.temp.val1="",this.temp.val2="",this.temp.val3=""},addText(){if(this.temp.f1===this.temp.f2||this.temp.f1===this.temp.f3||this.temp.f2===this.temp.f3)return this.warning_text="Петли не допустимы!",this.show=!0,this.clearFields(),void setTimeout(this.closeAlert,2e3);var e={...this.temp};this.array.push(e),this.kout+=1,this.textArray+=`Правило ${this.kout}:  ${this.temp.f1}:  ${this.temp.val1}  ${this.temp.r}  ${this.temp.f2}  ${this.temp.val2}  => ${this.temp.val3}\n`,this.clearFields()},async sendData(){try{const e=await Z.post("api/makegraph",{data:this.array});200===e.status&&(localStorage.setItem("nodes",JSON.stringify(e.data.response.nodes)),localStorage.setItem("edges",JSON.stringify(e.data.response.edges)),localStorage.setItem("layouts",JSON.stringify(e.data.response.layouts)),this.router.push("/GraphView"))}catch(e){this.warning_text="Ошибка отправки запроса!",this.show=!0,setTimeout(this.closeAlert,2e3)}finally{this.nodes=JSON.parse(localStorage.getItem("nodes")),this.edges=JSON.parse(localStorage.getItem("edges")),this.layouts=JSON.parse(localStorage.getItem("layouts")),this.ready=!0}},clearAll(){this.array=[],this.clearFields(),this.textArray="",this.textArray1=""},save(){let e={...this.infotemp};e.infofakt=this.parse_string(e.infofakt),this.fact_array.push(e),this.textArray1+=`${this.infotemp.fakt}  ${this.infotemp.descr}  ${this.infotemp.infofakt}\n`,this.clear_fact(),this.coutt+=1},clear_fact(){this.infotemp.fakt="",this.infotemp.descr="",this.infotemp.infofakt=""},parse_string(e){var t=[];for(var a of e.split(";"))t.push(a);return t},reformatToString(e){let t="";for(let a of e)t=t+`??(${a.fakt})=`+a.descr+"\n",t=t+`==(${a.fakt})=`+a.infofakt.join(", ")+"\n",t+="\n";return t},download(e,t,a){var n=new Blob([e],{type:a});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,t);else{var l=document.createElement("a"),o=URL.createObjectURL(n);l.href=o,l.download=t,document.body.appendChild(l),l.click(),setTimeout((function(){document.body.removeChild(l),window.URL.revokeObjectURL(o)}),0)}},savefile(){if(0===this.fact_array.length)return this.warning_text="Отсутствуют факты!",this.show=!0,void setTimeout(this.closeAlert,2e3);let e=this.createRule(this.array)+this.reformatToString(this.fact_array);this.download(e,"Отчёт.txt","text/plain")},createRule(e){let t=1,a="";for(let n of e)a+=`Правило ${t}:\nЕСЛИ\n${n.f1}=${n.val1}\n${n.r}\n${n.f2}=${n.val2}\nТО ${n.val3}\n`,t+=1;return a}}};const H=(0,i.Z)(z,[["render",F]]);var Y=H;function B(e,t,a,n,o,r){const i=(0,l.up)("v-network-graph");return(0,l.wg)(),(0,l.j4)(i,{class:"graph",nodes:o.nodes,edges:o.edges,layouts:o.layouts},null,8,["nodes","edges","layouts"])}var G={name:"GraphView",data(){return{nodes:null,edges:null,layouts:null}},mounted(){this.nodes=JSON.parse(localStorage.getItem("nodes")),this.edges=JSON.parse(localStorage.getItem("edges")),this.layouts=JSON.parse(localStorage.getItem("layouts"))}};const K=(0,i.Z)(G,[["render",B]]);var E=K;const q=[{path:"/",component:Y},{path:"/graph",component:E}],Q=(0,f.p7)({history:(0,f.PO)("/"),routes:q});var X=Q;const ee=(0,n.ri)(d);ee.use(u.ZP).use(c.ZP).use(X).mount("#app")}},t={};function a(n){var l=t[n];if(void 0!==l)return l.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,n,l,o){if(!n){var r=1/0;for(u=0;u<e.length;u++){n=e[u][0],l=e[u][1],o=e[u][2];for(var i=!0,s=0;s<n.length;s++)(!1&o||r>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(i=!1,o<r&&(r=o));if(i){e.splice(u--,1);var d=l();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,l,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,o,r=n[0],i=n[1],s=n[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(l in i)a.o(i,l)&&(a.m[l]=i[l]);if(s)var u=s(a)}for(t&&t(n);d<r.length;d++)o=r[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},n=self["webpackChunkuntitled"]=self["webpackChunkuntitled"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(4479)}));n=a.O(n)})();
//# sourceMappingURL=app.95954303.js.map